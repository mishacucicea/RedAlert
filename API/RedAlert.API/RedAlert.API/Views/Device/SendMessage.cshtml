
@{
    ViewBag.Title = "What's your mood";
}
<link rel="stylesheet" media="screen" type="text/css" href="~/Content/colorpicker.css" />
<script type="text/javascript" src="~/Scripts/colorpicker.js"></script>

<div class="panel-heading">
    <h3 class="panel-title">Click on the image </h3>
</div>
<div class="panel-body">

    <div class="form-group">
        @Html.Label("Senderkey", new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            <input id="senderkeyidmess" type="text" value="">
            @Html.ValidationMessage("Senderkey")

        </div>
    </div>

    <script>

        $(document).ready(function () {
            $('#devicePng').ColorPicker({
                color: '#0000ff',
                onShow: function (colpkr) {
                    $(colpkr).fadeIn(500);
                    return false;
                },
                onHide: function (colpkr) {
                    $(colpkr).fadeOut(500);
                    return false;
                },
                onChange: function (hsb, hex, rgb) {
                    $('#devicePng').css('backgroundColor', '#' + hex);
                }
            });

            var senderKey = localStorage.getItem("senderKey");
            if (senderKey != null) {
                $('#senderkeyidmess').val(senderKey);
            }

            $("#senderkeyidmess").change(function () {
                senderKey = $('#senderkeyidmess').val();

            });

                                    $("#sendMessageButton").click(function () {
                                                                                                                 
                                        var color = $('.colorpicker_hex input').val();                                                                                
                                        $.get("~/api/message/send?senderkey=" + senderKey + "&color=" + color);
                                        });
                                   
                                });
                            </script>

    <img class="img-responsive" id="devicePng" src="~/Content/img/devicepsd.png" alt="">
    <hr>
    <button type="button" id="sendMessageButton" class="btn btn-default btn-lg" data-clipboard-action="copy" data-clipboard-target="#foo">
        <span class="glyphicon glyphicon-send" aria-hidden="true"></span> Send to Device
    </button>
</div>